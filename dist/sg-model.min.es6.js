(()=>{"use strict";var e={118:(e,t,r)=>{class s{static uid(){return++s._uid}static defaults(e,...t){for(var r=t.length;r--;){var i=t[r];for(var o in i)void 0===e[o]&&(e[o]="object"==typeof i[o]?s.clone(i[o]):i[o])}return e}static clone(e){let t;if(Array.isArray(e)){t=[];for(var r=0;r<e.length;r++)t[r]="object"==typeof e[r]?s.clone(e[r]):e[r]}else if("object"==typeof e)for(var i in t={},e)t[i]="object"==typeof e[i]?s.clone(e[i]):e[i];else t=e;return t}static revertDefaults(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t.hasOwnProperty(r)&&("object"==typeof e[r]?this.revertDefaults(e[r],t[r]):e[r]=t[r]);else if("object"==typeof e)for(var s in e)t.hasOwnProperty(s)&&("object"==typeof e[s]?this.revertDefaults(e[s],t[s]):e[s]=t[s]);else e=t;return e}static upperFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}static getInstance(e){if(this._instance)return this._instance;if(!e)throw"Error! this._instance is empty!";return null}static get(...e){return this._instance&&this._instance.get(...e)}static set(...e){return this._instance&&this._instance.set(...e)}constructor(e,t,r){if(this.constructor.singleInstance){if(this.constructor._instance)throw"Error! this.constructor._instance not is empty!";this.constructor._instance=this}var i=e||{},o="function"==typeof this.defaults?this.defaults():s.clone(this.constructor.defaultProperties);let a=void 0;if(this.constructor.localStorageKey){let t=localStorage.getItem(this.constructor.localStorageKey+(this.constructor.singleInstance?"":"_"+e.id));t&&(a=JSON.parse(t)),a&&s.revertDefaults(o,a)}for(var n in i){var c=i[n];switch(this.constructor.typeProperties[n]){case s.TYPE_NUMBER:i[n]=void 0===c?void 0:+c;break;case s.TYPE_ARRAY_NUMBERS:for(var l=0;l<c.length;l++)c[l]=+c[l];break;case s.TYPE_OBJECT_NUMBERS:if(Array.isArray(c)){if(!(u=o[n]))throw'No default value was set for an object named "'+n+'" ('+this.constructor.name+")! An object structure is required to fill in the data!";var h=0;for(var l in u)u[l]=+c[h],h++;i[n]=u}else{if("object"!=typeof c)throw'Error! Property "'+n+'" ('+this.constructor.name+") must be an object or an array!";for(var l in c)c[l]=+c[l]}break;case s.TYPE_STRING:i[n]=""+c;break;case s.TYPE_BOOL:i[n]=!!c;break;case s.TYPE_OBJECT:if(Array.isArray(c)){var u;if(!(u=o[n]))throw'No default value was set for an object named "'+n+'" ('+this.constructor.name+")! An object structure is required to fill in the data!";h=0;for(var l in u)u[l]=c[h],h++;i[n]=u}else if("object"!=typeof c)throw'Error! Property "'+n+'" ('+this.constructor.name+") must be an object or an array!"}}if(this.properties=s.defaults({},o,i),this.properties.id||(this.properties.id=s.uid()),t?Object.assign(this,t):t=s.OBJECT_EMPTY,this.destroyed=!1,this.onChangeCallbacks={},this.ownSetters={},!this.constructor._ownSettersInitialized)for(var n in this.constructor._ownSettersInitialized=!0,this.constructor.ownSetters)!0===this.constructor.ownSetters[n]&&(this.constructor.ownSetters[n]=this["set"+s.upperFirstLetter(n)]);this.changed=!1,this.initialize.call(this,e,t,r)}initialize(){}set(e,t,r,i=!1){if(!1===i&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r);r=r||s.OBJECT_EMPTY;var o=this.constructor.typeProperties[e];if(o)switch(o){case s.TYPE_NUMBER:void 0!==t&&(t=r.precision?Math.roundTo(t,r.precision):+t);break;case s.TYPE_STRING:t=""+t;break;case s.TYPE_BOOL:t=!!t;break;case s.TYPE_OBJECT:return this.setObject.apply(this,arguments);case s.TYPE_ARRAY_NUMBERS:return this.setArray.apply(this,arguments);case s.TYPE_OBJECT_NUMBERS:return this.setObject.apply(this,arguments)}var a=this.properties[e];if(a===t)return!1;if(s._prevValue=void 0!==r.prev_value?r.prev_value:r.prev_value_clone?s.clone(a):a,this.properties[e]=t,this.changed=!0,!r.no_triggers){var n=this.onChangeCallbacks[e];if(n){r.off_may_be&&(n=s.clone(n));var c=void 0;for(var l in n){var h=n[l];void 0!==(c=h.d?h.f.call(h.c?h.c:this,h.d,t,s._prevValue):h.f.call(h.c?h.c:this,t,s._prevValue))&&(t=c)}}}return!0}setWoOwnSetter(e,t,r){return void 0!==t&&this.set(e,t,r,s.IGNORE_OWN_SETTER)||void 0===t}setArray(e,t,r,i=!1){if(!1===i&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r);r=r||s.OBJECT_EMPTY;var o=this.constructor.typeProperties[e],a=this.properties[e];if(s._prevValue=r.prev_value||void 0,s._bChanged=!1,Array.isArray(t))for(var n=0;n<t.length;n++){var c=t[n];o===s.TYPE_ARRAY_NUMBERS&&(c=r.precision?Math.roundTo(c,r.precision):+c),a[n]!==c&&(s._bChanged=!0,r.prev_value_clone&&!s._prevValue&&(s._prevValue=s.clone(a)),a[n]=c)}else{if(t)throw"aValues should be must Array or empty! ("+this.constructor.name+")";for(c=o===s.TYPE_OBJECT_NUMBERS?0:void 0,n=0;n<a.length;n++)a[n]!==c&&(s._bChanged=!0,r.prev_value_clone&&!s._prevValue&&(s._prevValue=s.clone(a)),a[n]=c)}if(s._bChanged){if(this.changed=!0,!r.no_triggers){var l=this.onChangeCallbacks[e];if(l){r.off_may_be&&(l=s.clone(l));var h=void 0;for(var n in l){var u=l[n];void 0!==(h=u.d?u.f.call(u.c?u.c:this,u.d,a,s._prevValue):u.f.call(u.c?u.c:this,a,s._prevValue))&&(a=h)}}}return!0}return!1}setObject(e,t,r,i=!1){if(!1===i&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r);r=r||s.OBJECT_EMPTY;var o=this.constructor.typeProperties[e],a=this.properties[e];if(s._prevValue=r.prev_value||void 0,s._bChanged=!1,Array.isArray(t))for(var n in s._index=0,a){var c=t[s._index];o===s.TYPE_OBJECT_NUMBERS&&(c=r.precision?Math.roundTo(c,r.precision):+c),a[n]!==c&&(s._bChanged=!0,r.prev_value_clone&&!s._prevValue&&(s._prevValue=s.clone(a)),a[n]=c),s._index++}else if(t)for(var n in t){c=t[n];o===s.TYPE_OBJECT_NUMBERS&&(c=r.precision?Math.roundTo(c,r.precision):+c),a[n]!==c&&(s._bChanged=!0,r.prev_value_clone&&!s._prevValue&&(s._prevValue=s.clone(a)),a[n]=c)}else{c=o===s.TYPE_OBJECT_NUMBERS?0:void 0;for(var n in a)a[n]!==c&&(s._bChanged=!0,r.prev_value_clone&&!s._prevValue&&(s._prevValue=s.clone(a)),a[n]=c)}if(s._bChanged){if(this.changed=!0,!r.no_triggers){var l=this.onChangeCallbacks[e];if(l){r.off_may_be&&(l=s.clone(l));var h=void 0;for(var u in l){var p=l[u];void 0!==(h=p.d?p.f.call(p.c?p.c:this,p.d,a,s._prevValue):p.f.call(p.c?p.c:this,a,s._prevValue))&&(a=h)}}}return!0}return!1}get(e){return this.properties[e]}on(e,t,r,s,i=!1){var o=this.onChangeCallbacks[e];o||(o=this.onChangeCallbacks[e]=[]),o.push({f:t,c:r,d:s}),i&&(s?t.call(r||this,s,this.properties[e],this.properties[e]):t.call(r||this,this.properties[e],this.properties[e]))}off(e,t){if(e){var r=this.onChangeCallbacks[e];if(r)if(t)for(var s=0;s<r.length;s++)r[s].f===t&&(r.splice(s,1),s--);else r.length=0}else for(var i in this.onChangeCallbacks)this.onChangeCallbacks[i].length=0}trigger(e,t){t=t||s.OBJECT_EMPTY;var r=this.onChangeCallbacks[e];if(r)for(var i in t.off_may_be&&(r=s.clone(r)),r)r[i].f.call(r[i].c?r[i].c:this,r[i].d?r[i].d:this.properties[e])}save(){if(!this.constructor.localStorageKey)throw"Error 37722990!";let e;this.constructor.singleInstance&&(e=this.properties.id,delete this.properties.id),localStorage.setItem(this.constructor.localStorageKey+(this.constructor.singleInstance?"":"_"+e),JSON.stringify(this.properties)),this.constructor.singleInstance&&(this.properties.id=e)}destroy(){this.destroyed=!0,this.constructor._instance=null,this.off()}}s.typeProperties={},s.TYPE_NUMBER=1,s.TYPE_STRING=2,s.TYPE_BOOL=3,s.TYPE_OBJECT=4,s.TYPE_ARRAY_NUMBERS=5,s.TYPE_OBJECT_NUMBERS=6,s.RUNNOW=1,s.OBJECT_EMPTY=Object.freeze({}),s.ownSetters={},s.IGNORE_OWN_SETTER=!0,s._uid=0,s.singleInstance=!1,s._instance=null,s.localStorageKey="",s._bChanged=!1,s._index=0,s._prevValue=void 0}},t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={exports:{}};return e[s](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(118)})();